<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="mystyle.css">
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.5/jquery.mobile.min.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.5/jquery.mobile.min.js"></script>
	
	<script src="iro.min.js"></script>
</head>
<body>

    <div>
        <h3><p class="collapse_header">Pick Color</p></h3>
        <div id="color-picker-container"></div>
    </div>
    <!--<div data-role="collapsible">-->
	<div>
        <h3><p class="collapse_header">Hexagon Slice</p></h3>
		<svg class="tricolor" height="600" width="600">
		<polygon points="300.0,7.5 231.495,126.154 368.505,126.154" class="a0"/>
		<polygon points="225.0,137.404 156.495,256.058 293.505,256.058" class="a1"/>
		<polygon points="231.495,133.654 368.505,133.654 300.0,252.308" class="a2"/>
		<polygon points="375.0,137.404 306.495,256.058 443.505,256.058" class="a3"/>
		<polygon points="150.0,267.308 81.495,385.961 218.505,385.961" class="a4"/>
		<polygon points="156.495,263.558 293.505,263.558 225.0,382.211" class="a5"/>
		<polygon points="300.0,267.308 231.495,385.961 368.505,385.961" class="a6"/>
		<polygon points="306.495,263.558 443.505,263.558 375.0,382.211" class="a7"/>
		<polygon points="450.0,267.308 381.495,385.961 518.505,385.961" class="a8"/>
		<polygon points="75.0,397.211 6.495,515.865 143.505,515.865" class="a9"/>
		<polygon points="81.495,393.461 218.505,393.461 150.0,512.115" class="a10"/>
		<polygon points="225.0,397.211 156.495,515.865 293.505,515.865" class="a11"/>
		<polygon points="231.495,393.461 368.505,393.461 300.0,512.115" class="a12"/>
		<polygon points="375.0,397.211 306.495,515.865 443.505,515.865" class="a13"/>
		<polygon points="381.495,393.461 518.505,393.461 450.0,512.115" class="a14"/>
		<polygon points="525.0,397.211 456.495,515.865 593.505,515.865" class="a15"/>
	    </svg>
    </div>
    <div>
        <h3><p class="collapse_header">Pentagon Slice</p></h3>
		<svg class="tricolor" height="600" width="600">
		<polygon points="300.0,7.5 231.495,126.154 368.505,126.154" class="a16"/>
		<polygon points="225.0,137.404 156.495,256.058 293.505,256.058" class="a17"/>
		<polygon points="231.495,133.654 368.505,133.654 300.0,252.308" class="a18"/>
		<polygon points="375.0,137.404 306.495,256.058 443.505,256.058" class="a19"/>
		<polygon points="150.0,267.308 81.495,385.961 218.505,385.961" class="a20"/>
		<polygon points="156.495,263.558 293.505,263.558 225.0,382.211" class="a21"/>
		<polygon points="300.0,267.308 231.495,385.961 368.505,385.961" class="a22"/>
		<polygon points="306.495,263.558 443.505,263.558 375.0,382.211" class="a23"/>
		<polygon points="450.0,267.308 381.495,385.961 518.505,385.961" class="a24"/>
		<polygon points="75.0,397.211 6.495,515.865 143.505,515.865" class="a25"/>
		<polygon points="81.495,393.461 218.505,393.461 150.0,512.115" class="a26"/>
		<polygon points="225.0,397.211 156.495,515.865 293.505,515.865" class="a27"/>
		<polygon points="231.495,393.461 368.505,393.461 300.0,512.115" class="a28"/>
		<polygon points="375.0,397.211 306.495,515.865 443.505,515.865" class="a29"/>
		<polygon points="381.495,393.461 518.505,393.461 450.0,512.115" class="a30"/>
		<polygon points="525.0,397.211 456.495,515.865 593.505,515.865" class="a31"/>
		</svg>
    </div>

<script type="text/javascript">
	var params = new URLSearchParams(location.search);
	
	window.onload = function () {
		for (var p of params.entries()){
			$('.' + p[0]).css('fill', '#' + p[1]);
		}
	};
	
	
	var demoColorPicker = new iro.ColorPicker("#color-picker-container", {
	  // Set the size of the color picker UI
	  width: 640,
	  height: 640,
	  // Set the initial color to red
	  color: "#f00",
		
      markerRadius: 32,
  	  padding: 4,
  	  sliderMargin: 24,
  	  sliderHeight: 72,
	});
	
	var allStates = $("svg.tricolor > *");
	
	/*
	$(document).mousedown(function() {
	      allStates.bind('mouseover',function(){
			  var colorhex = demoColorPicker.color.hexString;
			  $(this).css('fill', colorhex);
			  var key = $(this).attr('class')
			  params.set(key, colorhex.replace('#', ''));
			  window.history.replaceState({}, '', `${location.pathname}?${params}`);
	      });
	  })
	  .mouseup(function() {
	    allStates.unbind('mouseover');
	  });
	*/

	  allStates.mousedown(function() {
		  var colorhex = demoColorPicker.color.hexString;
		  $(this).css('fill', colorhex);
		  var key = $(this).attr('class')
		  params.set(key, colorhex.replace('#', ''));
		  window.history.replaceState({}, '', `${location.pathname}?${params}`);
	  });
	
  
</script>

</body>
</html>